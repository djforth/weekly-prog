{"version":3,"sources":["../../src/factories/sessions_fcty.js"],"names":["SessionsFcty","time","st","fn","isNumber","isDate","getHours","filter","id","isArray","includes","key","data","d","has","filters","get","checkFilter","fromJS","checkInPeriod","size"],"mappings":"o+DAIMA,Y,0TACUC,I,CAAMC,E,CAAIC,E,CAAG,OAEnB,kBAAEC,QAAF,CAAWF,EAAX,GACA,iBAAEE,QAAF,CAAWD,EAAX,CADA,EAEA,iBAAEE,MAAF,CAASJ,IAAT,CAJmB,EAUlBA,KAAKK,QAAL,IAAmBJ,EAAnB,EACLD,KAAKK,QAAL,IAAmBH,EACtB,C,oCAEWI,M,CAAQC,E,CAAG,OACjB,kBAAEC,OAAF,CAAUF,MAAV,CADiB,CACS,iBAAEG,QAAF,CAAWH,MAAX,CAAmBC,EAAnB,CADT,CAGdD,SAAWC,EACnB,C,+BAEMG,G,CAAKH,E,CAAG,uBACR,MAAKI,IADG,CAGN,KAAKA,IAAL,CAAUL,MAAV,CAAiB,SAACM,CAAD,CAAK,CAC3B,GAAI,CAACA,EAAEC,GAAF,CAAM,SAAN,CAAL,CAAuB,SAEvB,GAAIC,SAAUF,EAAEG,GAAF,CAAM,SAAN,CAAd,CAH2B,QAItBD,QAAQD,GAAR,CAAYH,GAAZ,CAJsB,EAMpB,OAAKM,WAAL,CAAiBF,QAAQC,GAAR,CAAYL,GAAZ,CAAjB,CAAmCH,EAAnC,CACR,CAPM,CAHM,CACU,oBAAUU,MAAV,IAUxB,C,sCAEahB,E,CAAIC,E,CAAG,uBACd,MAAKS,IADS,CAGd,KAAKD,GAHS,CAKZ,KAAKC,IAAL,CAAUL,MAAV,CAAiB,SAACM,CAAD,CAAK,CAC3B,GAAI,CAACA,EAAEC,GAAF,CAAM,OAAKH,GAAX,CAAL,CAAsB,SAEtB,GAAIV,MAAOY,EAAEG,GAAF,CAAM,OAAKL,GAAX,CAAX,CACA,MAAO,QAAKQ,aAAL,CAAmBlB,IAAnB,CAAyBC,EAAzB,CAA6BC,EAA7B,CACR,CALM,CALY,CAGG,KAAKS,IAHR,CACI,oBAAUM,MAAV,IAUxB,C,mCAEUP,G,CAAI,CACb,KAAKA,GAAL,CAAWA,GACZ,C,8BAEK,CACJ,MAAQ,MAAKC,IAAN,CAAc,KAAKA,IAAL,CAAUQ,IAAxB,CAA+B,CACvC,C,yDAGYpB,Y","file":"sessions_fcty.js","sourcesContent":["import _ from 'lodash';\nimport DataManager from 'datamanager';\nimport Immutable from 'immutable';\n\nclass SessionsFcty extends DataManager{\n  checkInPeriod(time, st, fn){\n    if (\n        !(_.isNumber(st) &&\n          _.isNumber(fn) &&\n          _.isDate(time)\n          )\n      ){\n      return false;\n    }\n\n    return time.getHours() >= st &&\n      time.getHours() <= fn;\n  }\n\n  checkFilter(filter, id){\n    if (_.isArray(filter)) return _.includes(filter, id);\n\n    return filter === id;\n  }\n\n  filter(key, id){\n    if (!this.data) return Immutable.fromJS([]);\n\n    return this.data.filter((d)=>{\n      if (!d.has('filters')) return false;\n\n      let filters = d.get('filters');\n      if (!filters.has(key)) return false;\n\n      return this.checkFilter(filters.get(key), id);\n    });\n  }\n\n  getTimePeriod(st, fn){\n    if (!this.data) return Immutable.fromJS([]);\n\n    if (!this.key) return this.data;\n\n    return this.data.filter((d)=>{\n      if (!d.has(this.key)) return false;\n\n      let time = d.get(this.key);\n      return this.checkInPeriod(time, st, fn);\n    });\n  }\n\n  setTimeKey(key){\n    this.key = key;\n  }\n\n  size(){\n    return (this.data) ? this.data.size : 0;\n  }\n}\n\nexport default SessionsFcty;\n"]}