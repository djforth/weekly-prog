{"version":3,"sources":["../../src/factories/sessions_fcty.js"],"names":["_","DataManager","Immutable","SessionsFcty","time","st","fn","isNumber","isDate","getHours","filter","id","isArray","includes","key","data","fromJS","d","has","filters","get","checkFilter","checkInPeriod","size"],"mappings":";;;;;;;;AAAA,OAAOA,CAAP,MAAc,aAAd;AACA,OAAOC,WAAP,MAAwB,aAAxB;AACA,OAAOC,SAAP,MAAsB,WAAtB;;IAEMC,Y;;;;;;;;;;;kCAEUC,I,EAAMC,E,EAAIC,E,EAAG;AACzB,UACI,EAAEN,EAAEO,QAAF,CAAWF,EAAX,KACAL,EAAEO,QAAF,CAAWD,EAAX,CADA,IAEAN,EAAEQ,MAAF,CAASJ,IAAT,CAFF,CADJ,EAKG;AACD,eAAO,KAAP;AACD;;AAED,aAAOA,KAAKK,QAAL,MAAmBJ,EAAnB,IACLD,KAAKK,QAAL,MAAmBH,EADrB;AAED;;;gCAEWI,M,EAAQC,E,EAAG;AACrB,UAAIX,EAAEY,OAAF,CAAUF,MAAV,CAAJ,EAAuB,OAAOV,EAAEa,QAAF,CAAWH,MAAX,EAAmBC,EAAnB,CAAP;;AAEvB,aAAOD,WAAWC,EAAlB;AACD;;;2BAEMG,G,EAAKH,E,EAAG;AAAA;;AACb,UAAI,CAAC,KAAKI,IAAV,EAAgB,OAAOb,UAAUc,MAAV,CAAiB,EAAjB,CAAP;;AAEhB,aAAO,KAAKD,IAAL,CAAUL,MAAV,CAAiB,UAACO,CAAD,EAAK;AAC3B,YAAI,CAACA,EAAEC,GAAF,CAAM,SAAN,CAAL,EAAuB,OAAO,KAAP;;AAEvB,YAAIC,UAAUF,EAAEG,GAAF,CAAM,SAAN,CAAd;AACA,YAAI,CAACD,QAAQD,GAAR,CAAYJ,GAAZ,CAAL,EAAuB,OAAO,KAAP;;AAEvB,eAAO,OAAKO,WAAL,CAAiBF,QAAQC,GAAR,CAAYN,GAAZ,CAAjB,EAAmCH,EAAnC,CAAP;AACD,OAPM,CAAP;AAQD;;;kCAEaN,E,EAAIC,E,EAAG;AAAA;;AACnB,UAAI,CAAC,KAAKS,IAAV,EAAgB,OAAOb,UAAUc,MAAV,CAAiB,EAAjB,CAAP;;AAEhB,UAAI,CAAC,KAAKF,GAAV,EAAe,OAAO,KAAKC,IAAZ;;AAEf,aAAO,KAAKA,IAAL,CAAUL,MAAV,CAAiB,UAACO,CAAD,EAAK;AAC3B,YAAI,CAACA,EAAEC,GAAF,CAAM,OAAKJ,GAAX,CAAL,EAAsB,OAAO,KAAP;;AAEtB,YAAIV,OAAOa,EAAEG,GAAF,CAAM,OAAKN,GAAX,CAAX;AACA,eAAO,OAAKQ,aAAL,CAAmBlB,IAAnB,EAAyBC,EAAzB,EAA6BC,EAA7B,CAAP;AACD,OALM,CAAP;AAMD;;;+BAEUQ,G,EAAI;AACb,WAAKA,GAAL,GAAWA,GAAX;AACD;;;2BAEK;AACJ,aAAQ,KAAKC,IAAN,GAAc,KAAKA,IAAL,CAAUQ,IAAxB,GAA+B,CAAtC;AACD;;;;EAtDwBtB,W;;AAyD3B,eAAeE,YAAf","file":"sessions_fcty.js","sourcesContent":["import _ from 'lodash/core';\nimport DataManager from 'datamanager';\nimport Immutable from 'immutable';\n\nclass SessionsFcty extends DataManager {\n\n  checkInPeriod(time, st, fn){\n    if (\n        !(_.isNumber(st) &&\n          _.isNumber(fn) &&\n          _.isDate(time)\n          )\n      ){\n      return false;\n    }\n\n    return time.getHours() >= st &&\n      time.getHours() <= fn;\n  }\n\n  checkFilter(filter, id){\n    if (_.isArray(filter)) return _.includes(filter, id);\n\n    return filter === id;\n  }\n\n  filter(key, id){\n    if (!this.data) return Immutable.fromJS([]);\n\n    return this.data.filter((d)=>{\n      if (!d.has('filters')) return false;\n\n      let filters = d.get('filters');\n      if (!filters.has(key)) return false;\n\n      return this.checkFilter(filters.get(key), id);\n    });\n  }\n\n  getTimePeriod(st, fn){\n    if (!this.data) return Immutable.fromJS([]);\n\n    if (!this.key) return this.data;\n\n    return this.data.filter((d)=>{\n      if (!d.has(this.key)) return false;\n\n      let time = d.get(this.key);\n      return this.checkInPeriod(time, st, fn);\n    });\n  }\n\n  setTimeKey(key){\n    this.key = key;\n  }\n\n  size(){\n    return (this.data) ? this.data.size : 0;\n  }\n}\n\nexport default SessionsFcty;\n"]}