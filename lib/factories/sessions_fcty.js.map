{"version":3,"sources":["../../src/factories/sessions_fcty.js"],"names":[],"mappings":";;;;;;;;;;AACA,IAAM,CAAC,GAAa,OAAO,CAAC,QAAQ,CAAC,CAAC;AACtC,IAAM,WAAW,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC;AAC3C,IAAM,SAAS,GAAK,OAAO,CAAC,WAAW,CAAC,CAAA;;IAElC,YAAY;YAAZ,YAAY;;WAAZ,YAAY;0BAAZ,YAAY;;kEAAZ,YAAY;;;eAAZ,YAAY;;kCAEF,IAAI,EAAE,EAAE,EAAE,EAAE,EAAC;AACzB,UACI,EAAE,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,IACX,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,IACd,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAA,AAChB,EACH;AACF,eAAO,KAAK,CAAC;OACd;;AAED,aAAO,IAAI,CAAC,QAAQ,EAAE,IAAI,EAAE,IAClB,IAAI,CAAC,QAAQ,EAAE,IAAI,EAAE,CAAA;KAChC;;;gCAEW,MAAM,EAAE,EAAE,EAAC;AACrB,UAAG,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,OAAO,CAAC,CAAC,QAAQ,CAAC,MAAM,EAAE,EAAE,CAAC,CAAA;;AAEnD,aAAO,MAAM,KAAK,EAAE,CAAC;KACtB;;;2BAEM,GAAG,EAAE,EAAE,EAAC;;;AACb,UAAG,CAAC,IAAI,CAAC,IAAI,EAAE,OAAO,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;;AAE3C,aAAO,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,UAAC,CAAC,EAAG;AAC3B,YAAG,CAAC,CAAC,CAAC,GAAG,CAAC,SAAS,CAAC,EAAE,OAAO,KAAK,CAAC;;AAEnC,YAAI,OAAO,GAAG,CAAC,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;AAC/B,YAAG,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,OAAO,KAAK,CAAC;;AAEnC,eAAO,OAAK,WAAW,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,EAAE,CAAC,CAAC;OAC/C,CAAC,CAAA;KACH;;;kCAEa,EAAE,EAAE,EAAE,EAAC;;;;AAEnB,UAAG,CAAC,IAAI,CAAC,IAAI,EAAE,OAAO,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;;AAE3C,aAAO,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,UAAC,CAAC,EAAG;AAC3B,YAAG,OAAK,GAAG,IAAI,CAAC,CAAC,GAAG,CAAC,OAAK,GAAG,CAAC,EAAC;AAC7B,cAAI,IAAI,GAAG,CAAC,CAAC,GAAG,CAAC,OAAK,GAAG,CAAC,CAAC;;AAE3B,iBAAO,OAAK,aAAa,CAAC,IAAI,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;SACzC;AACD,eAAO,KAAK,CAAC;OACd,CAAC,CAAA;KACH;;;+BAEU,GAAG,EAAC;AACb,UAAI,CAAC,GAAG,GAAG,GAAG,CAAC;KAChB;;;2BAEK;AACJ,aAAO,AAAC,IAAI,CAAC,IAAI,GAAI,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC,CAAA;KACxC;;;SAvDG,YAAY;GAAS,WAAW;;AA0DtC,MAAM,CAAC,OAAO,GAAG,YAAY,CAAC","file":"sessions_fcty.js","sourcesContent":["\nconst _           = require(\"lodash\");\nconst DataManager = require(\"datamanager\");\nconst Immutable   = require(\"immutable\")\n\nclass SessionsFcty extends DataManager {\n\n  checkInPeriod(time, st, fn){\n    if(\n        !(_.isNumber(st)\n          && _.isNumber(fn)\n          && _.isDate(time)\n          )\n      ) {\n      return false;\n    }\n\n    return time.getHours() >= st\n           && time.getHours() <= fn\n  }\n\n  checkFilter(filter, id){\n    if(_.isArray(filter)) return _.includes(filter, id)\n\n    return filter === id;\n  }\n\n  filter(key, id){\n    if(!this.data) return Immutable.fromJS([]);\n\n    return this.data.filter((d)=>{\n      if(!d.has(\"filters\")) return false;\n\n      let filters = d.get(\"filters\");\n      if(!filters.has(key)) return false;\n\n      return this.checkFilter(filters.get(key), id);\n    })\n  }\n\n  getTimePeriod(st, fn){\n    // console.log(this.data)\n    if(!this.data) return Immutable.fromJS([]);\n\n    return this.data.filter((d)=>{\n      if(this.key && d.has(this.key)){\n        let time = d.get(this.key);\n\n        return this.checkInPeriod(time, st, fn);\n      }\n      return false;\n    })\n  }\n\n  setTimeKey(key){\n    this.key = key;\n  }\n\n  size(){\n    return (this.data) ? this.data.size : 0\n  }\n}\n\nmodule.exports = SessionsFcty;\n"]}