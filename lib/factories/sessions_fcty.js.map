{"version":3,"sources":["../../src/factories/sessions_fcty.js"],"names":[],"mappings":";;;;;;;;;;AACA,IAAM,IAAc,QAAQ,QAAR,CAAd;AACN,IAAM,cAAc,QAAQ,aAAR,CAAd;AACN,IAAM,YAAc,QAAQ,WAAR,CAAd;;IAEA;;;;;;;;;;;kCAEU,MAAM,IAAI,IAAG;AACzB,UACI,EAAE,EAAE,QAAF,CAAW,EAAX,KACG,EAAE,QAAF,CAAW,EAAX,CADH,IAEG,EAAE,MAAF,CAAS,IAAT,CAFH,CAAF,EAIA;AACF,eAAO,KAAP,CADE;OALJ;;AASA,aAAO,KAAK,QAAL,MAAmB,EAAnB,IACG,KAAK,QAAL,MAAmB,EAAnB,CAXe;;;;gCAcf,QAAQ,IAAG;AACrB,UAAG,EAAE,OAAF,CAAU,MAAV,CAAH,EAAsB,OAAO,EAAE,QAAF,CAAW,MAAX,EAAmB,EAAnB,CAAP,CAAtB;;AAEA,aAAO,WAAW,EAAX,CAHc;;;;2BAMhB,KAAK,IAAG;;;AACb,UAAG,CAAC,KAAK,IAAL,EAAW,OAAO,UAAU,MAAV,CAAiB,EAAjB,CAAP,CAAf;;AAEA,aAAO,KAAK,IAAL,CAAU,MAAV,CAAiB,UAAC,CAAD,EAAK;AAC3B,YAAG,CAAC,EAAE,GAAF,CAAM,SAAN,CAAD,EAAmB,OAAO,KAAP,CAAtB;;AAEA,YAAI,UAAU,EAAE,GAAF,CAAM,SAAN,CAAV,CAHuB;AAI3B,YAAG,CAAC,QAAQ,GAAR,CAAY,GAAZ,CAAD,EAAmB,OAAO,KAAP,CAAtB;;AAEA,eAAO,OAAK,WAAL,CAAiB,QAAQ,GAAR,CAAY,GAAZ,CAAjB,EAAmC,EAAnC,CAAP,CAN2B;OAAL,CAAxB,CAHa;;;;kCAaD,IAAI,IAAG;;;;AAEnB,UAAG,CAAC,KAAK,IAAL,EAAW,OAAO,UAAU,MAAV,CAAiB,EAAjB,CAAP,CAAf;;AAEA,aAAO,KAAK,IAAL,CAAU,MAAV,CAAiB,UAAC,CAAD,EAAK;AAC3B,YAAG,OAAK,GAAL,IAAY,EAAE,GAAF,CAAM,OAAK,GAAL,CAAlB,EAA4B;AAC7B,cAAI,OAAO,EAAE,GAAF,CAAM,OAAK,GAAL,CAAb,CADyB;;AAG7B,iBAAO,OAAK,aAAL,CAAmB,IAAnB,EAAyB,EAAzB,EAA6B,EAA7B,CAAP,CAH6B;SAA/B;AAKA,eAAO,KAAP,CAN2B;OAAL,CAAxB,CAJmB;;;;+BAcV,KAAI;AACb,WAAK,GAAL,GAAW,GAAX,CADa;;;;2BAIT;AACJ,aAAO,IAAC,CAAK,IAAL,GAAa,KAAK,IAAL,CAAU,IAAV,GAAiB,CAA/B,CADH;;;;SArDF;EAAqB;;AA0D3B,OAAO,OAAP,GAAiB,YAAjB","file":"sessions_fcty.js","sourcesContent":["\nconst _           = require(\"lodash\");\nconst DataManager = require(\"datamanager\");\nconst Immutable   = require(\"immutable\")\n\nclass SessionsFcty extends DataManager {\n\n  checkInPeriod(time, st, fn){\n    if(\n        !(_.isNumber(st)\n          && _.isNumber(fn)\n          && _.isDate(time)\n          )\n      ) {\n      return false;\n    }\n\n    return time.getHours() >= st\n           && time.getHours() <= fn\n  }\n\n  checkFilter(filter, id){\n    if(_.isArray(filter)) return _.includes(filter, id)\n\n    return filter === id;\n  }\n\n  filter(key, id){\n    if(!this.data) return Immutable.fromJS([]);\n\n    return this.data.filter((d)=>{\n      if(!d.has(\"filters\")) return false;\n\n      let filters = d.get(\"filters\");\n      if(!filters.has(key)) return false;\n\n      return this.checkFilter(filters.get(key), id);\n    })\n  }\n\n  getTimePeriod(st, fn){\n    // console.log(this.data)\n    if(!this.data) return Immutable.fromJS([]);\n\n    return this.data.filter((d)=>{\n      if(this.key && d.has(this.key)){\n        let time = d.get(this.key);\n\n        return this.checkInPeriod(time, st, fn);\n      }\n      return false;\n    })\n  }\n\n  setTimeKey(key){\n    this.key = key;\n  }\n\n  size(){\n    return (this.data) ? this.data.size : 0\n  }\n}\n\nmodule.exports = SessionsFcty;\n"]}