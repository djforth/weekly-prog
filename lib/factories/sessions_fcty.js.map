{"version":3,"sources":["../../src/factories/sessions_fcty.js"],"names":[],"mappings":";;;;;;;;;;AACA,IAAM,IAAc,QAAQ,aAAR,CAAd;AACN,IAAM,cAAc,QAAQ,aAAR,CAAd;AACN,IAAM,YAAc,QAAQ,WAAR,CAAd;;IAEA;;;;;;;;;;;kCAEU,MAAM,IAAI,IAAG;AACzB,UACI,EAAE,EAAE,QAAF,CAAW,EAAX,KACA,EAAE,QAAF,CAAW,EAAX,CADA,IAEA,EAAE,MAAF,CAAS,IAAT,CAFA,CAAF,EAID;AACD,eAAO,KAAP,CADC;OALH;;AASA,aAAO,KAAK,QAAL,MAAmB,EAAnB,IACL,KAAK,QAAL,MAAmB,EAAnB,CAXuB;;;;gCAcf,QAAQ,IAAG;AACrB,UAAI,EAAE,OAAF,CAAU,MAAV,CAAJ,EAAuB,OAAO,EAAE,QAAF,CAAW,MAAX,EAAmB,EAAnB,CAAP,CAAvB;;AAEA,aAAO,WAAW,EAAX,CAHc;;;;2BAMhB,KAAK,IAAG;;;AACb,UAAI,CAAC,KAAK,IAAL,EAAW,OAAO,UAAU,MAAV,CAAiB,EAAjB,CAAP,CAAhB;;AAEA,aAAO,KAAK,IAAL,CAAU,MAAV,CAAiB,UAAC,CAAD,EAAK;AAC3B,YAAI,CAAC,EAAE,GAAF,CAAM,SAAN,CAAD,EAAmB,OAAO,KAAP,CAAvB;;AAEA,YAAI,UAAU,EAAE,GAAF,CAAM,SAAN,CAAV,CAHuB;AAI3B,YAAI,CAAC,QAAQ,GAAR,CAAY,GAAZ,CAAD,EAAmB,OAAO,KAAP,CAAvB;;AAEA,eAAO,OAAK,WAAL,CAAiB,QAAQ,GAAR,CAAY,GAAZ,CAAjB,EAAmC,EAAnC,CAAP,CAN2B;OAAL,CAAxB,CAHa;;;;kCAaD,IAAI,IAAG;;;AACnB,UAAI,CAAC,KAAK,IAAL,EAAW,OAAO,UAAU,MAAV,CAAiB,EAAjB,CAAP,CAAhB;;AAEA,UAAI,CAAC,KAAK,GAAL,EAAU,OAAO,KAAK,IAAL,CAAtB;;AAEA,aAAO,KAAK,IAAL,CAAU,MAAV,CAAiB,UAAC,CAAD,EAAK;AAC3B,YAAI,CAAC,EAAE,GAAF,CAAM,OAAK,GAAL,CAAP,EAAkB,OAAO,KAAP,CAAtB;;AAEA,YAAI,OAAO,EAAE,GAAF,CAAM,OAAK,GAAL,CAAb,CAHuB;AAI3B,eAAO,OAAK,aAAL,CAAmB,IAAnB,EAAyB,EAAzB,EAA6B,EAA7B,CAAP,CAJ2B;OAAL,CAAxB,CALmB;;;;+BAaV,KAAI;AACb,WAAK,GAAL,GAAW,GAAX,CADa;;;;2BAIT;AACJ,aAAO,IAAC,CAAK,IAAL,GAAa,KAAK,IAAL,CAAU,IAAV,GAAiB,CAA/B,CADH;;;;SApDF;EAAqB;;AAyD3B,OAAO,OAAP,GAAiB,YAAjB","file":"sessions_fcty.js","sourcesContent":["\nconst _           = require('lodash/core');\nconst DataManager = require('datamanager');\nconst Immutable   = require('immutable');\n\nclass SessionsFcty extends DataManager {\n\n  checkInPeriod(time, st, fn){\n    if (\n        !(_.isNumber(st) &&\n          _.isNumber(fn) &&\n          _.isDate(time)\n          )\n      ){\n      return false;\n    }\n\n    return time.getHours() >= st &&\n      time.getHours() <= fn;\n  }\n\n  checkFilter(filter, id){\n    if (_.isArray(filter)) return _.includes(filter, id);\n\n    return filter === id;\n  }\n\n  filter(key, id){\n    if (!this.data) return Immutable.fromJS([]);\n\n    return this.data.filter((d)=>{\n      if (!d.has('filters')) return false;\n\n      let filters = d.get('filters');\n      if (!filters.has(key)) return false;\n\n      return this.checkFilter(filters.get(key), id);\n    });\n  }\n\n  getTimePeriod(st, fn){\n    if (!this.data) return Immutable.fromJS([]);\n\n    if (!this.key) return this.data;\n\n    return this.data.filter((d)=>{\n      if (!d.has(this.key)) return false;\n\n      let time = d.get(this.key);\n      return this.checkInPeriod(time, st, fn);\n    });\n  }\n\n  setTimeKey(key){\n    this.key = key;\n  }\n\n  size(){\n    return (this.data) ? this.data.size : 0;\n  }\n}\n\nmodule.exports = SessionsFcty;\n"]}