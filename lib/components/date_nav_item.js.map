{"version":3,"sources":["../../src/components/date_nav_item.js"],"names":[],"mappings":"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","file":"date_nav_item.js","sourcesContent":["const React = require(\"react\")\n    , _     = require(\"lodash\");\n\n//Mixins\nconst cssMixins    = require(\"morse-react-mixins\").css_mixins\n    , textMixins   = require(\"morse-react-mixins\").text_mixins;\n\n\n//Flux\nconst SessionsActions = require(\"../actions/sessions_actions\")\n    , ColumnsStore    = require(\"../stores/columns_store\")\n\nclass DateNavItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.listCss = [\"date-nav-item\", {\"active\":this.props.active}]\n    this.linkCss = [\"date-nav-item-link\", {\"loading-session\":this.props.nav_item.nosessions}]\n    this.state = {list:this.getClasses(this.listCss), link:this.getClasses(this.linkCss), device:ColumnsStore.getDevice()};\n  }\n\n  componentDidMount(){\n    ColumnsStore.addChangeListener(\"change\", this._setDevice.bind(this));\n  }\n\n  componentWillUnmount() {\n    ColumnsStore.removeChangeListener(\"change\", this._setDevice);\n  }\n\n  _setDevice(){\n    // console.log(\"WTF>>>>>>>>>>>>>>>> ITEM\", ColumnsStore.getDevice())\n    this.setState({device:ColumnsStore.getDevice()})\n  }\n\n  _loader(){\n    if(!this.props.nav_item.nosessions) return \"\";\n    return(\n      <div className=\"loading\">\n        <span className=\"hidden\">Loading {this.props.nav_item.alt}</span>\n      </div>\n    );\n  }\n\n  _click(e){\n    e.preventDefault();\n    let date = this.props.nav_item.date;\n    let cb   = this.props.callback;\n\n    this.listCss  = this.toggleCss(this.listCss);\n    this.setState({list:this.getClasses(this.listCss)});\n\n    SessionsActions.changeDate(date);\n    if(_.isFunction(cb)){\n      cb(date)\n    }\n  }\n\n  componentWillReceiveProps(nextProps){\n\n    this.listCss = _.map(this.listCss, (li)=>{\n      if(_.isObject(li) && _.has(li, \"active\")){\n        li.active = nextProps.active;\n      }\n      return li;\n    });\n\n    this.linkCss = _.map(this.linkCss, (a)=>{\n      if(_.isObject(a) && _.has(a, \"loading-session\")){\n        a[\"loading-session\"] = nextProps.nav_item.nosessions;\n      }\n      return a;\n    });\n\n    this.setState({\n      list:this.getClasses(this.listCss),\n      link:this.getClasses(this.linkCss)\n    });\n  }\n\n  shouldComponentUpdate(nextProps, nextState){\n    return (nextProps.active !== this.props.active)\n        || (nextProps.nav_item.nosessions !== this.props.nav_item.nosessions) || this.state.device !== nextState.device\n  }\n\n  _renderTitle(){\n    let fmt = this.props.nav_item.fmt;\n    // console.log(\"device\",this.state.device)\n    if(this.state.device === \"mobile\"){\n      return (\n        <span>\n          <span className=\"nav-date\">{fmt.format(\"DD\")}</span>\n          <span className=\"nav-day\">{fmt.format(\"ddd\")}</span>\n        </span>\n      );\n    } else {\n      return fmt.format(\"ddd Do\");\n    }\n  }\n\n\n  render(){\n    let item = this.props.nav_item\n    return (\n      <li role=\"presentation\" className={this.state.list} ref={this.props.referance}>\n        {this._loader()}\n        <a href      = \"#\"\n           title     = {item.alt}\n           onClick   = {this._click.bind(this)}\n           className = {this.state.link}\n          >\n          {this._renderTitle()}\n          </a>\n      </li>\n    );\n  }\n\n}\n\nObject.assign(DateNavItem.prototype, cssMixins);\nObject.assign(DateNavItem.prototype, textMixins);\n\n\nmodule.exports = DateNavItem;\n"]}