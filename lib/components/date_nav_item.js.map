{"version":3,"sources":["../../src/components/date_nav_item.js"],"names":[],"mappings":"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","file":"date_nav_item.js","sourcesContent":["const React = require(\"react\")\n    , _     = require(\"lodash\");\n\n//Mixins\nconst cssMixins    = require(\"morse-react-mixins\").css_mixins\n    , textMixins   = require(\"morse-react-mixins\").text_mixins;\n\n\n//Flux\nconst SessionsActions = require(\"../actions/sessions_actions\")\n    , ColumnsStore    = require(\"../stores/columns_store\")\n\nclass DateNavItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.listCss = [\"date-nav-item\", {\"active\":this.props.active}]\n    this.linkCss = [\"date-nav-item-link\", {\"loading-session\":this.props.nav_item.nosessions}]\n    this.state = {list:this.getClasses(this.listCss), link:this.getClasses(this.linkCss), device:ColumnsStore.getDevice()};\n  }\n\n  componentDidMount(){\n    ColumnsStore.addChangeListener(\"change\", this._setDevice.bind(this));\n  }\n\n  componentWillUnmount() {\n    ColumnsStore.removeChangeListener(\"change\", this._setDevice);\n  }\n\n  _setDevice(){\n    // console.log(\"WTF>>>>>>>>>>>>>>>> ITEM\", ColumnsStore.getDevice())\n    this.setState({device:ColumnsStore.getDevice()})\n  }\n\n  _loader(){\n    if(!this.props.nav_item.nosessions) return \"\";\n    return(\n      <div className=\"loading\">\n        <span className=\"hidden\">Loading {this.props.nav_item.alt}</span>\n      </div>\n    );\n  }\n\n  _click(e){\n    e.preventDefault();\n    let date = this.props.nav_item.date;\n    let cb   = this.props.callback;\n\n    this.listCss  = this.toggleCss(this.listCss);\n    this.setState({list:this.getClasses(this.listCss)});\n\n    SessionsActions.changeDate(date);\n    if(_.isFunction(cb)){\n      cb(date)\n    }\n  }\n\n  componentWillReceiveProps(nextProps){\n\n    this.listCss = _.map(this.listCss, (li)=>{\n      if(_.isObject(li) && _.has(li, \"active\")){\n        li.active = nextProps.active;\n      }\n      return li;\n    });\n\n    this.linkCss = _.map(this.linkCss, (a)=>{\n      if(_.isObject(a) && _.has(a, \"loading-session\")){\n        a[\"loading-session\"] = nextProps.nav_item.nosessions;\n      }\n      return a;\n    });\n\n    this.setState({\n      list:this.getClasses(this.listCss),\n      link:this.getClasses(this.linkCss)\n    });\n  }\n\n  shouldComponentUpdate(nextProps, nextState){\n    return (nextProps.active !== this.props.active)\n        || (nextProps.nav_item.nosessions !== this.props.nav_item.nosessions) || this.state.device !== nextState.device\n  }\n\n  _renderTitle(){\n    let fmt = this.props.nav_item.fmt;\n    // console.log(\"device\",this.state.device)\n    if(this.state.device === \"mobile\"){\n      return (\n        <span>\n          <span className=\"nav-date\">{fmt.format(\"DD\")}</span>\n          <span className=\"nav-day\">{fmt.format(\"ddd\")}</span>\n        </span>\n      );\n    } else {\n      return fmt.format(\"ddd Do\");\n    }\n  }\n\n\n  render(){\n    let item = this.props.nav_item\n    return (\n      <li role=\"presentation\" className={this.state.list}>\n        {this._loader()}\n        <a href      = \"#\"\n           title     = {item.alt}\n           onClick   = {this._click.bind(this)}\n           className = {this.state.link}\n          >\n          {this._renderTitle()}\n          </a>\n      </li>\n    );\n  }\n\n}\n\nObject.assign(DateNavItem.prototype, cssMixins);\nObject.assign(DateNavItem.prototype, textMixins);\n\n\nmodule.exports = DateNavItem;\n"]}