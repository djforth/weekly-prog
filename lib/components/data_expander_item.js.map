{"version":3,"sources":["../../src/components/data_expander_item.js"],"names":[],"mappings":"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","file":"data_expander_item.js","sourcesContent":["//Libraries\nconst React = require(\"react\");\nconst _     = require(\"lodash\");\n\n// Flux\nconst ColumnsStore   = require(\"../stores/columns_store\");\nconst SessionsStore      = require(\"../stores/sessions_store\");\n\n//Components\nconst DataItem  = require(\"./data_item\");\n\n// Mixins\nconst cssMixins  = require(\"morse-react-mixins\").css_mixins;\n\n\nclass DataExpanderItem extends DataItem {\n  constructor(props) {\n    super(props);\n    this.active = [{active: false}];\n    this.answer = [\"collapse\", {\"in\": false}];\n    this.chevron = [\"glyphicon\", {\"glyphicon-chevron-up\": false}, {\"glyphicon-chevron-down\": true}];\n    this.state = {\n      acc_css: this.getClasses(this.answer),\n      active: this.getClasses(this.active),\n      chevron: this.getClasses(this.chevron),\n      css: \"col-md-1\",\n      device: \"desktop\",\n      selected: false,\n      show_additional: false\n    };\n\n  }\n\n  _onClick(e) {\n    e.preventDefault();\n    let show = (this.state.show_additional) ? false : true;\n\n    this.active  = this.toggleCss(this.active);\n    this.answer  = this.toggleCss(this.answer);\n    this.chevron = this.toggleCss(this.chevron);\n    this.setState({\n      acc_css         : this.getClasses(this.answer),\n      active          : this.getClasses(this.active),\n      chevron         : this.getClasses(this.chevron),\n      show_additional : show\n    });\n\n  }\n\n  _renderAll(visible) {\n    let data = this.props.data;\n\n    if(data && visible) {\n\n      let li = _.map(visible, (col) => {\n        return this._renderItem(col, data);\n      });\n\n      return li;\n    }\n\n    return \"\";\n  }\n\n  _renderAdditional() {\n    let additional = [];\n\n    let visible  = ColumnsStore.getShowable();\n    // console.log(\"visible\", visible)\n    let extra = _.reject(visible, {key:\"description\"});\n    extra  = _.reject(extra, {key:\"actions\"});\n\n    if(this.state.show_additional) {\n      additional.push(\n        <ul className={`list-group ${this.state.acc_css}`} key={`additonal${this.props.data.get(\"id\")}`}>\n          {this._renderAll(extra)}\n        </ul>\n      );\n      additional.push(\n        <div className=\"description\">\n          {this._rawMarkup(this.props.data.get(\"description\"))}\n        </div>\n      )\n\n      let action = _.where(visible, {key:\"actions\"})\n      // console.log(\"action\", action)\n      if(!_.isEmpty(action)){\n        additional.push(this._actions(this.props.data, action));\n      }\n    } else {\n      additional = \"\";\n    }\n\n    return additional;\n  }\n\n  _renderItem(col, data){\n    // let title = _.find(visible, {key:key}).title\n    return <li className=\"list-group-item col-md-4\" key={col.title+data.get(\"id\")} ><strong>{col.title}:</strong> {this._displayData(data, col)}</li>;\n  }\n\n  _renderShowButton() {\n    let buttonText;\n\n    if(this.state.active) {\n      buttonText = \"Less Information\";\n    } else {\n      buttonText = \"More Information\";\n    }\n\n    return (\n      <div className={this.checkCss(this.props.css, \"expand\")}>\n        <a href=\"#\"\n          onClick={this._onClick.bind(this)}\n          className=\"icon icon-information\"\n          title={buttonText} >\n          <span>{buttonText}</span>\n        </a>\n      </div>\n    );\n  }\n\n  _renderTd(){\n    let item = this.props.data;\n    if(item && this.state.columns){\n       return _.map(this.state.columns, function(col){\n        return (col.key === \"expand\") ? this._renderShowButton() : this._renderColumn(col, item);\n      }.bind(this));\n    }\n    return \"\";\n  }\n\n  render() {\n    return (\n      <div className={`tr ${this.state.active}`}>\n        <div className=\"clearfix\">\n          {this._renderTd()}\n        </div>\n        <div className={`additional ${this.state.active}`}>\n          {this._renderAdditional()}\n        </div>\n      </div>\n    );\n  }\n\n}\n\nObject.assign(DataExpanderItem.prototype, cssMixins);\n\nmodule.exports = DataExpanderItem;\n"]}