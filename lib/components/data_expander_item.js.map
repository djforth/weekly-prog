{"version":3,"sources":["../../src/components/data_expander_item.js"],"names":[],"mappings":"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","file":"data_expander_item.js","sourcesContent":["//Libraries\nconst React = require(\"react\");\nconst _     = require(\"lodash\");\n\n// Flux\nconst ColumnsStore   = require(\"../stores/columns_store\");\nconst SessionsStore      = require(\"../stores/sessions_store\");\n\n//Components\nconst DataItem  = require(\"./data_item\");\n\n// Mixins\nconst cssMixins  = require(\"morse-react-mixins\").css_mixins;\nconst textMixins  = require(\"morse-react-mixins\").text_mixins;\n\n\nclass DataExpanderItem extends DataItem {\n  constructor(props) {\n    super(props);\n    this.active = [{active: false}];\n    this.answer = [\"collapse\", {\"in\": false}];\n    this.chevron = [\"glyphicon\", {\"glyphicon-chevron-up\": false}, {\"glyphicon-chevron-down\": true}];\n    this.state = {\n      acc_css: this.getClasses(this.answer),\n      active: this.getClasses(this.active),\n      chevron: this.getClasses(this.chevron),\n      css: \"col-md-1\",\n      device: \"desktop\",\n      selected: false,\n      show_additional: false\n    };\n\n  }\n\n  _createKey(keys){\n    return this.createId(keys, this.props.data.get(\"id\"));\n  }\n\n  _onClick(e) {\n    e.preventDefault();\n    let show = (this.state.show_additional) ? false : true;\n\n    this.active  = this.toggleCss(this.active);\n    this.answer  = this.toggleCss(this.answer);\n    this.chevron = this.toggleCss(this.chevron);\n    this.setState({\n      acc_css         : this.getClasses(this.answer),\n      active          : this.getClasses(this.active),\n      chevron         : this.getClasses(this.chevron),\n      show_additional : show\n    });\n\n  }\n\n  _renderAll(visible) {\n    let data = this.props.data;\n\n    if(data && visible) {\n      let li = _.map(visible, (col) => {\n        return this._renderItem(col, data);\n      });\n\n      return li;\n    }\n\n    return \"\";\n  }\n\n  _bookBtn(link, buttonText){\n    return (\n        <a href={link}\n          onClick={this._onClick.bind(this)}\n          className=\"icon icon-information\"\n          title={buttonText} >\n          <span>{buttonText}</span>\n        </a>\n    );\n  }\n\n  _renderAdditional() {\n    let additional = [];\n\n    let visible  = ColumnsStore.getShowable();\n    // console.log(\"visible\", visible)\n    let extra = _.reject(visible, {key:\"description\"});\n    extra  = _.reject(extra, {key:\"actions\"});\n\n    if(this.state.show_additional) {\n      additional.push(\n        <ul className={`list-group ${this.state.acc_css}`} key={this._createKey(\"additional\")}>\n          {this._renderAll(extra)}\n        </ul>\n      );\n      additional.push(\n        <div className=\"description\" key={this._createKey(\"description\")}>\n          {this._rawMarkup(this.props.data.get(\"description\"))}\n        </div>\n      )\n\n      let action = _.where(visible, {key:\"actions\"})\n      if(!_.isEmpty(action)){\n        additional.push(this._actions(this.props.data, action));\n      }\n    } else {\n      additional = \"\";\n    }\n\n    return additional;\n  }\n\n  _renderItem(col, data){\n    // let title = _.find(visible, {key:key}).title\n    return <li className=\"list-group-item col-md-4\" key={this._createKey(col.title)}><strong>{col.title}:</strong> {this._showValues(col)}</li>;\n  }\n\n  _renderButton() {\n    let buttonText = (this.state.active) ? \"Less \" : \"More \";\n    buttonText += \"Information\";\n    return (\n      <div className={this.checkCss(this.props.css, \"expand\")} key={this._createKey(\"book\")}>\n        <a href=\"#\"\n          onClick={this._onClick.bind(this)}\n          className=\"icon icon-information\"\n          title={buttonText} >\n          <span className=\"hidden\">{buttonText}</span>\n        </a>\n      </div>\n\n    )\n  }\n\n  _renderTd(){\n    let item = this.props.data;\n    if(item && this.state.columns){\n       return _.map(this.state.columns, function(col){\n        return (col.key === \"expand\" && this._expandTest()) ? this._renderButton() : this._renderColumn(col, item);\n      }.bind(this));\n    }\n    return \"\";\n  }\n\n  _expandTest(){\n    let visible  = _.pluck(ColumnsStore.getShowable(), \"key\");\n    return this.props.data.reduce((p, v, k)=>{\n      let t = (_.isBoolean(p)) ? p : false;\n      return (t) ? t : _.includes(visible, k);\n    });\n  }\n\n  render() {\n    return (\n      <div className={`tr ${this.state.active}`}>\n        <div className=\"clearfix\">\n          {this._renderTd()}\n        </div>\n        <div className={`additional ${this.state.active}`}>\n          {this._renderAdditional()}\n        </div>\n      </div>\n    );\n  }\n\n}\n\nObject.assign(DataExpanderItem.prototype, cssMixins);\n\nmodule.exports = DataExpanderItem;\n"]}