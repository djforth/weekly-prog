{"version":3,"sources":["../../src/components/now_next.js"],"names":[],"mappings":"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","file":"now_next.js","sourcesContent":["//Libraries\nconst React = require(\"react\")\n    , _     = require(\"lodash\");\n\n//Mixins\nconst cssMixins    = require(\"morse-react-mixins\").css_mixins\n    , textMixins   = require(\"morse-react-mixins\").text_mixins\n    , widthsMixins = require(\"morse-react-mixins\").widths_mixins;\n\n// Morse Libraies\nconst ViewportDetect = require(\"viewport-detection-es6\");\n\n//utiles\nconst process_nav = require(\"../utils/process_nav\");\n\n//Flux\nconst ColumnsActions  = require(\"../actions/columns_actions\")\n    , ColumnsStore    = require(\"../stores/columns_store\")\n    , SessionsActions = require(\"../actions/sessions_actions\")\n    , SessionsStore   = require(\"../stores/sessions_store\");\n\n// Components\nconst DataHead     = require(\"./data_head\")\n    , NowNextItems = require(\"./nownext_sessions\")\n    , TouchNav     = require(\"touch-nav\");\n\n\nclass NowNext extends React.Component {\n  constructor(props) {\n    super(props);\n    let navitems = process_nav(this.props.navitems, this.props.title_tag)\n    SessionsActions.setGroupby(this.props.groupby);\n    SessionsActions.setFacility(_.first(this.props.navitems).id)\n    this.percent = 0;\n    this.state = {sessions:[], keys:[], visible:[], device:\"desktop\", navitems:navitems};\n  }\n\n  //React life cycle\n  componentWillMount(){\n    SessionsStore.addChangeListener(\"prerender\", this._getSessions.bind(this));\n    SessionsActions.prerenderData(this.props.sessions);\n    ColumnsActions.addingColumns(this.props.columns);\n    ColumnsActions.changeDevice(this.device);\n\n     // this._getSessions();\n  }\n\n  componentDidMount(){\n    this.detect = new ViewportDetect();\n    this.device = this.detect.getDevice();\n    this.size  = this.detect.windowSize();\n    ColumnsActions.changeDevice(this.device);\n    // this.setState({device:this.device});\n    this.id = this.detect.trackSize(this._onDeviceChange.bind(this));\n    this.detect.trackSize(function(device, size){\n      if(this.device !== device){\n        this.device = device;\n        ColumnsActions.changeDevice(device);\n      }\n\n      this.size   = size;\n\n    }.bind(this));\n\n    SessionsStore.addChangeListener(\"api_set\", this._fetchData.bind(this));\n    SessionsActions.setApi(this.props.sessionsApi);\n\n  }\n\n  componentWillUnmount() {\n    this.detect.removeCallback(this.id);\n    SessionsStore.removeChangeListener(\"prerender\", this._getSessions);\n  }\n\n  _onDeviceChange(device, size){\n      if(this.device !== device){\n        this.device = device;\n        ColumnsActions.changeDevice(device);\n      }\n\n      this.size   = size;\n\n  }\n\n  _fetchData(){\n    SessionsStore.removeChangeListener(\"api_set\", this._fetchData);\n    _.defer(()=>{\n      SessionsActions.fetchNowNext();\n    });\n  }\n\n  _onClick(id, ...args){\n    // console.log(\"click\", args)\n    SessionsActions.setFacility(id);\n  }\n\n  _getSessions(){\n    let session = SessionsStore._getDate();\n    if(!_.isEmpty(session)) {\n      this.setState({date:session.date, sessions:session.data})\n    }\n  }\n\n  render(){\n    return(\n      <div className=\"now-next\">\n        <TouchNav navitems={this.state.navitems} callback={this._onClick.bind(this)} />\n        <div className=\"table weekly-prog\">\n          <DataHead device={this.props.device} css={this.props.css} key={\"head\"} />\n          <div className=\"tbody\">\n            <NowNextItems {...this.props} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n}\n\nObject.assign(NowNext.prototype, cssMixins);\nObject.assign(NowNext.prototype, textMixins);\nObject.assign(NowNext.prototype, widthsMixins);\n\nmodule.exports = NowNext;\n"]}