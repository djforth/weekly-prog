{"version":3,"sources":["../../src/components/data_item.js"],"names":[],"mappings":"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","file":"data_item.js","sourcesContent":["const React = require(\"react\")\n    , _     = require(\"lodash/core\");\n\nconst ColumnsStore   = require(\"../stores/columns_store\");\n\nconst timeChecker = require(\"../utils/time_checker\")\n    , formatter   = require(\"../utils/formatter\");\n\n//Mixins\nlet mixins = require(\"morse-react-mixins\");\nconst [cssMixins, textMixins]  = [mixins.css_mixins, mixins.text_mixins];\n\n// Components\nlet ColumnItem = require('./column_item'),\n    ExpandBtn  = require('./simple/expand_btn');\n\nclass DataItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.active = [{active:false}];\n    // this._select.bind(this);\n    this.formatter = formatter(this.props.data)\n    this.state = {data:this.props.data, columns:[], datefield:[]};\n\n  }\n\n  _createKey(keys){\n    return this.createId(keys, this.props.data.get(\"id\"));\n  }\n\n  componentWillMount() {\n    this.mounted = true;\n    this.setState({data:this.props.data, columns:ColumnsStore.getVisible()});\n    ColumnsStore.addChangeListener(\"change\", this._onChange.bind(this));\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    ColumnsStore.removeChangeListener(\"change\", this._onChange);\n  }\n\n  _expandTest(col){\n    if(col.key !== \"expand\") return false;\n    let visible  = _.map(ColumnsStore.getShowable(), \"key\");\n    return this.props.data.reduce((p, v, k)=>{\n      let t = (_.isBoolean(p)) ? p : false;\n      return (t) ? t : _.includes(visible, k);\n    });\n  }\n\n  _expander(){\n    let buttonText = (this.state.active) ? \"Less \" : \"More \";\n    buttonText += \"Information\";\n    return (<ExpandBtn\n      css = {this.checkCss(this.props.css, \"expand\")}\n      expand = {this.props.expand}\n      key = {this._createKey('expand')}\n      text = {buttonText}\n    />);\n  }\n\n  _onChange(){\n    if(this.mounted){\n      this.setState({\n        columns:ColumnsStore.getVisible()\n      });\n    }\n  }\n\n  _renderTd(){\n    let item = this.props.data;\n    if(item && this.state.columns){\n       let td = _.map(this.state.columns, function(col){\n\n        if(this._expandTest(col)){\n          return this._expander()\n        }\n\n\n         return (<ColumnItem\n            css  = {this.props.css}\n            col  = {col}\n            item = {item}\n            key  = {this._createKey(col.key)}\n          />)\n         this._renderColumn(col, item);\n      }.bind(this));\n\n      return td;\n    }\n    return \"\";\n  }\n\n  render() {\n    return (\n      <div className=\"clearfix\">\n        {this._renderTd()}\n      </div>\n    );\n  }\n\n\n}\n\nObject.assign(DataItem.prototype, cssMixins);\nObject.assign(DataItem.prototype, textMixins);\n\nmodule.exports = DataItem;\n"]}