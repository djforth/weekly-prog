{"version":3,"sources":["../../../src/components/niu/date_nav_item.js"],"names":[],"mappings":"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","file":"date_nav_item.js","sourcesContent":["const React = require('react')\n    , _     = require('lodash/core');\n\n//Mixins\nconst cssMixins    = require('morse-react-mixins').css_mixins\n    , textMixins   = require('morse-react-mixins').text_mixins;\n\n\n//Flux\nconst SessionsActions = require('../actions/sessions_actions')\n    , ColumnsStore    = require('../stores/columns_store')\n\nclass DateNavItem extends React.Component {\n  constructor(props) {\n    super(props);\n    if (!_.isBoolean(this.props.active)) alert(this.props.active)\n    this.listCss = ['date-nav-item', {'active':this.props.active}]\n    this.linkCss = ['date-nav-item-link', {'loading-session':false}]\n    this.state = {list:this.getClasses(this.listCss), device:ColumnsStore.getDevice()};\n  }\n\n  componentDidMount(){\n    ColumnsStore.addChangeListener('change', this._setDevice.bind(this));\n  }\n\n  componentWillUnmount() {\n    ColumnsStore.removeChangeListener('change', this._setDevice);\n  }\n\n  _setDevice(){\n    // console.log('WTF>>>>>>>>>>>>>>>> ITEM', ColumnsStore.getDevice())\n    this.setState({device:ColumnsStore.getDevice()})\n  }\n\n  _loader(){\n    if (!this.props.nav_item.nosessions) return '';\n    return(\n      <div className='loading'>\n        <span className='hidden'>Loading {this.props.nav_item.alt}</span>\n      </div>\n    );\n  }\n\n  _click(e){\n    e.preventDefault();\n    let date = this.props.nav_item.date;\n    let cb   = this.props.callback;\n\n    this.listCss  = this.toggleCss(this.listCss);\n    this.setState({list:this.getClasses(this.listCss)});\n\n    SessionsActions.changeDate(date);\n    if (_.isFunction(cb)){\n      cb(date)\n    }\n  }\n\n  componentWillReceiveProps(nextProps){\n    let fmt = this.props.nav_item.fmt;\n    // alert(fmt.format('ddd Do') + nextProps.active)\n    this.listCss = _.map(this.listCss, (li)=>{\n      if (_.isObject(li) && _.has(li, 'active')){\n        li.active = nextProps.active;\n      }\n      return li;\n    });\n\n    this.linkCss = _.map(this.linkCss, (a)=>{\n      if (_.isObject(a) && _.has(a, 'loading-session')){\n        a['loading-session'] = nextProps.nav_item.nosessions;\n      }\n      return a;\n    });\n\n    if (!_.isBoolean(nextProps.active) || nextProps.active) alert(fmt.format('ddd Do') + nextProps.active)\n\n    this.setState({\n      list:this.getClasses(this.listCss),\n      link:this.getClasses(this.linkCss)\n    });\n  }\n\n  shouldComponentUpdate(nextProps, nextState){\n    return (nextProps.active !== this.props.active)\n        || (nextProps.nav_item.nosessions !== this.props.nav_item.nosessions) || this.state.device !== nextState.device\n  }\n\n  _renderTitle(){\n    let fmt = this.props.nav_item.fmt;\n    if (this.state.device === 'mobile'){\n      return (\n        <span>\n          <span className='nav-date'>{fmt.format('DD')}</span>\n          <span className='nav-day'>{fmt.format('ddd')}</span>\n        </span>\n      );\n    } else {\n      return fmt.format('ddd Do');\n    }\n  }\n\n\n  render(){\n    let item = this.props.nav_item\n    return (\n      <li role='presentation' className={this.state.list}>\n        <span>{this._loader()}</span>\n        <a href      = '#'\n           title     = {item.alt}\n           onClick   = {this._click.bind(this)}\n           className = 'date-nav-item-link'\n          >\n          {this._renderTitle()}\n          </a>\n      </li>\n    );\n  }\n\n}\n\nObject.assign(DateNavItem.prototype, cssMixins);\nObject.assign(DateNavItem.prototype, textMixins);\n\n\nmodule.exports = DateNavItem;\n"]}