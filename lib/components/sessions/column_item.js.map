{"version":3,"sources":["../../../src/components/sessions/column_item.js"],"names":[],"mappings":"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","file":"column_item.js","sourcesContent":["const React = require('react')\n    , _     = require('lodash/core');\n\nconst timeChecker = require('../../utils/time_checker')\n    , formatter   = require('../../utils/formatter');\n\n// Components\nlet BookBtn  = require('./stateless/book_btn')\n  , Time     = require('./stateless/time')\n  , RichText = require('./stateless/richtext')\n  , Wrapper  = require('./stateless/wrapper');\n\n// Mixins\nlet mixins = require('morse-react-mixins');\nconst [cssMixins, textMixins]  = [mixins.css_mixins, mixins.text_mixins];\n\nclass ColumnItem extends React.Component{\n  constructor(props){\n    super(props);\n    this.formatter = formatter(this.props.item);\n  }\n\n  _checkbtn(item){\n    let no_link = {link: null, title: null, instruction: null};\n    if (item.has('booking_instruction')){\n      return Object.assign(no_link, {\n        instruction: item.get('booking_instruction')\n      });\n    }\n\n    if (item.hasIn(['buttons', 'buy'])){\n      return Object.assign(no_link, {\n        title: 'Buy'\n        , link: item.getIn(['buttons', 'buy'])\n      });\n    }\n\n    if (item.hasIn(['buttons', 'book'])){\n      return Object.assign(no_link, {\n        title: 'Book'\n        , link: item.getIn(['buttons', 'book'])\n      });\n    }\n\n    return no_link;\n  }\n\n  _actions(){\n    let item, places;\n    item = this.props.item;\n    places = item.get('places_left');\n    let {link, title, instruction} = this._checkbtn(item);\n    return (<BookBtn places={places} link={link} title={title} instruction={instruction} />);\n  }\n\n  _showContent(value){\n    return (\n      <RichText content={value} />\n    );\n  }\n\n  _showTime(value){\n    let cancelled, item;\n    item = this.props.item;\n    cancelled = (item.has('cancelled')) ? item.get('cancelled') : false;\n    return (<Time\n      cols = {this.props.col}\n      checker = {timeChecker(item, this.props.col)}\n      time = {value}\n      cancelled = {cancelled}\n      />);\n  }\n\n  _showValues(){\n    let col = this.props.col;\n    if (col.key === 'actions') return this._actions(col);\n    let value = this.formatter(col);\n\n    if (_.isString(value) && value.match(/<|>/g)){\n      return (<RichText content={value} />);\n    }\n\n    if (col.type === 'time'){\n      return this._showTime(value);\n    }\n\n    return value;\n  }\n\n  render(){\n    let col, css;\n    col = this.props.col;\n    css = this.checkCss(this.props.css, col.key);\n    return (\n      <div className={css} key={_.uniqueId('dataItem')}>\n        <Wrapper item={this.props.item} col={col} >\n          {this._showValues()}\n        </Wrapper>\n      </div>\n    );\n  }\n}\n\nObject.assign(ColumnItem.prototype, cssMixins);\nObject.assign(ColumnItem.prototype, textMixins);\n\nmodule.exports = ColumnItem;\n"]}