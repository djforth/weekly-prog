{"version":3,"sources":["../../../src/components/sessions/column_item.js"],"names":[],"mappings":"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","file":"column_item.js","sourcesContent":["const React = require('react')\n    , _     = require('lodash/core');\n\nconst timeChecker = require('../../utils/time_checker')\n    , formatter   = require('../../utils/formatter');\n\n// Components\nlet BookBtn  = require('./stateless/book_btn')\n  , Time     = require('./stateless/time')\n  , RichText = require('./stateless/richtext')\n  , Wrapper  = require('./stateless/wrapper');\n\n// Mixins\nlet mixins = require('morse-react-mixins');\nconst [cssMixins, textMixins]  = [mixins.css_mixins, mixins.text_mixins];\n\nclass ColumnItem extends React.Component{\n  constructor(props){\n    super(props);\n    this.formatter = formatter(this.props.item);\n  }\n\n  _checkbtn(item){\n    console.log(item.toJS())\n    let no_link = {link: null, title: null}\n    if (!item.has('buttons')) return no_link;\n    let btns = item.get('buttons');\n    console.log('buy', btns.has('buy'))\n    if (btns.has('buy')){\n      console.log('buy', btns.get('buy'))\n      return {\n        title: 'Buy'\n        , link: btns.get('buy')\n      }\n    }\n\n    if (btns.has('book')){\n      return {\n        title: 'Book'\n        , link: btns.get('book')\n      }\n    }\n\n    return no_link;\n  }\n\n\n\n  _actions(){\n    let item, places;\n    item = this.props.item;\n    places = item.get('places_left');\n    let {link, title} = this._checkbtn(item);\n    console.log(link, title)\n    return (<BookBtn places={places} link={link} title={title} />);\n  }\n\n  _showContent(value){\n    return (\n      <RichText content={value} />\n    );\n  }\n\n  _showTime(value){\n    let cancelled, item;\n    item = this.props.item;\n    cancelled = (item.has('cancelled')) ? item.get('cancelled') : false;\n    return (<Time\n      cols = {this.props.col}\n      checker = {timeChecker(item, this.props.col)}\n      time = {value}\n      cancelled = {cancelled}\n      />);\n  }\n\n  _showValues(){\n    let col = this.props.col;\n    if (col.key === 'actions') return this._actions(col);\n    let value = this.formatter(col);\n\n    if (_.isString(value) && value.match(/<|>/g)){\n      return (<RichText content={value} />);\n    }\n\n    if (col.type === 'time'){\n      return this._showTime(value);\n    }\n\n    return value;\n  }\n\n  render(){\n    let col, css;\n    col = this.props.col;\n    css = this.checkCss(this.props.css, col.key);\n    return (\n      <div className={css} key={_.uniqueId('dataItem')}>\n        <Wrapper item={this.props.item} col={col} >\n          {this._showValues()}\n        </Wrapper>\n      </div>\n    );\n  }\n}\n\nObject.assign(ColumnItem.prototype, cssMixins);\nObject.assign(ColumnItem.prototype, textMixins);\n\nmodule.exports = ColumnItem;\n"]}