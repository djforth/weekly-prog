{"version":3,"sources":["../../../src/components/sessions/data_item.js"],"names":[],"mappings":"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","file":"data_item.js","sourcesContent":["const React = require('react')\n    , _     = require('lodash/core');\n\nconst ColumnsStore   = require('../../stores/columns_store');\n\nconst formatter   = require('../../utils/formatter');\n\n// Mixins\nlet mixins = require('morse-react-mixins');\nconst [cssMixins, textMixins]  = [mixins.css_mixins, mixins.text_mixins];\n\n// Components\nlet ColumnItem = require('./column_item')\n    , ExpandBtn  = require('./stateless/expand_btn');\n\nclass DataItem extends React.Component{\n  constructor(props){\n    super(props);\n    this.active = [{active: false}];\n    // this._select.bind(this);\n    this.formatter = formatter(this.props.data);\n    this.state = {data: this.props.data, columns: [], datefield: []};\n  }\n\n  _createKey(keys){\n    return this.createId(keys, this.props.data.get('id'));\n  }\n\n  componentWillMount(){\n    this.mounted = true;\n    this.setState({data: this.props.data, columns: ColumnsStore.getVisible()});\n    ColumnsStore.addChangeListener('change', this._onChange.bind(this));\n  }\n\n  componentWillUnmount(){\n    this.mounted = false;\n    ColumnsStore.removeChangeListener('change', this._onChange);\n  }\n\n  _expandTest(col){\n    if (col.key !== 'expand') return false;\n    let visible  = _.map(ColumnsStore.getShowable(), 'key');\n    return this.props.data.reduce((p, v, k)=>{\n      let t = (_.isBoolean(p)) ? p : false;\n      return (t) ? t : _.includes(visible, k);\n    });\n  }\n\n  _expander(){\n    let buttonText = (this.state.active) ? 'Less ' : 'More ';\n    buttonText += 'Information';\n    return (<ExpandBtn\n      css = {this.checkCss(this.props.css, 'expand')}\n      expand = {this.props.expand}\n      key = {this._createKey('expand')}\n      text = {buttonText}\n    />);\n  }\n\n  _onChange(){\n    if (this.mounted){\n      this.setState({\n        columns: ColumnsStore.getVisible()\n      });\n    }\n  }\n\n  _renderTd(){\n    let item = this.props.data;\n    if (item && this.state.columns){\n      let td = _.map(this.state.columns, function(col){\n        if (this._expandTest(col)){\n          return this._expander();\n        }\n\n        return (<ColumnItem\n          css  = {this.props.css}\n          col  = {col}\n          item = {item}\n          key  = {this._createKey(col.key)}\n        />);\n      }.bind(this));\n\n      return td;\n    }\n    return '';\n  }\n\n  render(){\n    return (\n      <div className=\"clearfix\">\n        {this._renderTd()}\n      </div>\n    );\n  }\n}\n\nObject.assign(DataItem.prototype, cssMixins);\nObject.assign(DataItem.prototype, textMixins);\n\nmodule.exports = DataItem;\n"]}