{"version":3,"sources":["../../src/utils/time_checker.js"],"names":[],"mappings":";;;;AACA,IAAM,IAAU,QAAQ,aAAR,CAAV;IACA,SAAU,QAAQ,QAAR,CAAV;;AAEN,EAAE,QAAF,GAAgB,QAAQ,iBAAR,CAAhB;;AAEA,SAAS,KAAT,CAAe,EAAf,EAAmB,EAAnB,EAAsB;AACpB,MAAI,MAAM,QAAN,CADgB;AAEpB,SACM,CAAC,IAAI,OAAJ,CAAY,EAAZ,KAAmB,IAAI,MAAJ,CAAW,EAAX,CAAnB,CAAD,KACI,IAAI,QAAJ,CAAa,EAAb,KAAoB,IAAI,MAAJ,CAAW,EAAX,CAApB,CADJ,CAHc;CAAtB;;AAQA,SAAS,MAAT,CAAgB,EAAhB,EAAmB;AACjB,MAAI,MAAM,QAAN,CADa;AAEjB,SAAO,IAAI,OAAJ,CAAY,EAAZ,CAAP,CAFiB;CAAnB;;AAKA,OAAO,OAAP,GAAiB,UAAS,IAAT,EAAe,GAAf,EAAmB;AAClC,MAAI,QAAQ,EAAE,IAAF,CAAO,GAAP,EAAY,CAAC,KAAD,EAAQ,QAAR,CAAZ,CAAR,CAD8B;;iBAEjB,EAAE,MAAF,CAAS,KAAT,EAFiB;;;;MAE7B,mBAF6B;MAExB,mBAFwB;MAG7B,KAAa,KAAK,GAAL,CAAS,GAAT,EAHgB;MAGzB,KAAwB,KAAK,GAAL,CAAS,GAAT,EAHC;;;AAKlC,SAAO;AACL,WAAM;aAAI,MAAM,EAAN,EAAU,EAAV;KAAJ;AACJ,YAAO;aAAK,OAAO,EAAP;KAAL;AACP,kBAAa,sBAAC,GAAD,EAA6B;UAAvB,6DAAK,kBAAkB;UAAd,iEAAS,kBAAK;;AAC1C,UAAI,CAAC,EAAE,MAAF,CAAS,GAAT,CAAD,IAAkB,MAAM,EAAN,EAAU,EAAV,CAAlB,EAAiC,OAAO,GAAP,CAArC;AACA,UAAI,OAAO,EAAP,CAAJ,EAAgB,OAAO,IAAP,CAAhB;AACA,aAAO,QAAP,CAH0C;KAA7B;;GAHjB,CALkC;CAAnB","file":"time_checker.js","sourcesContent":["\nconst _       = require('lodash/core')\n    , Moment  = require('moment');\n\n_.includes    = require('lodash/includes');\n\nfunction isnow(st, fn){\n  let now = Moment();\n  return (\n        (now.isAfter(st) || now.isSame(st))\n        && (now.isBefore(fn) || now.isSame(fn))\n        );\n}\n\nfunction ispast(fn){\n  let now = Moment();\n  return now.isAfter(fn);\n}\n\nmodule.exports = function(item, col){\n  let times = _.pick(col, ['key', 'concat']);\n  var [stk, fnk] = _.values(times);\n  var [st, fn]   = [item.get(stk), item.get(fnk)]\n\n  return {\n    isNow:()=>isnow(st, fn)\n    , isPast:()=> ispast(fn)\n    , setNowOrPast:(now, past='', fallback='')=>{\n      if (!_.isNull(now) && isnow(st, fn)) return now;\n      if (ispast(fn)) return past;\n      return fallback;\n    }\n\n  }\n}\n"]}