{"version":3,"sources":["../../src/utils/time_checker.js"],"names":[],"mappings":";;;;AACA,IAAM,IAAU,QAAQ,QAAR,CAAV;IACA,SAAU,QAAQ,QAAR,CAAV;;AAGN,SAAS,MAAT,CAAe,EAAf,EAAmB,EAAnB,EAAsB;AACpB,MAAI,MAAM,QAAN,CADgB;AAEpB,SACM,CAAC,IAAI,OAAJ,CAAY,EAAZ,KAAmB,IAAI,MAAJ,CAAW,EAAX,CAAnB,CAAD,KACI,IAAI,QAAJ,CAAa,EAAb,KAAoB,IAAI,MAAJ,CAAW,EAAX,CAApB,CADJ,CAHc;CAAtB;;AAQA,SAAS,OAAT,CAAgB,EAAhB,EAAmB;AACjB,MAAI,MAAM,QAAN,CADa;AAEjB,SAAO,IAAI,OAAJ,CAAY,EAAZ,CAAP,CAFiB;CAAnB;;AAKA,OAAO,OAAP,GAAiB,UAAS,IAAT,EAAe,GAAf,EAAmB;AAClC,MAAI,QAAQ,EAAE,IAAF,CAAO,GAAP,EAAY,UAAC,CAAD,EAAI,CAAJ,EAAQ;AAC9B,WAAO,EAAE,QAAF,CAAW,CAAC,KAAD,EAAQ,QAAR,CAAX,EAA8B,CAA9B,CAAP,CAD8B;GAAR,CAApB,CAD8B;;iBAIjB,EAAE,MAAF,CAAS,KAAT,EAJiB;;;;MAI7B,mBAJ6B;MAIxB,mBAJwB;MAK7B,KAAa,KAAK,GAAL,CAAS,GAAT,EALgB;MAKzB,KAAwB,KAAK,GAAL,CAAS,GAAT,EALC;;AASlC,SAAO;AACH,WAAM;aAAI,OAAM,EAAN,EAAU,EAAV;KAAJ;AACN,YAAO;aAAK,QAAO,EAAP;KAAL;AACP,kBAAa,sBAAC,GAAD,EAA6B;UAAvB,6DAAK,kBAAkB;UAAd,iEAAS,kBAAK;;AAC1C,UAAG,CAAC,EAAE,MAAF,CAAS,GAAT,CAAD,IAAkB,OAAM,EAAN,EAAU,EAAV,CAAlB,EAAiC,OAAO,GAAP,CAApC;AACA,UAAG,QAAO,EAAP,CAAH,EAAe,OAAO,IAAP,CAAf;AACA,aAAO,QAAP,CAH0C;KAA7B;;GAHjB,CATkC;CAAnB","file":"time_checker.js","sourcesContent":["\nconst _       = require(\"lodash\")\n    , Moment  = require(\"moment\");\n\n\nfunction isNow(st, fn){\n  let now = Moment();\n  return (\n        (now.isAfter(st) || now.isSame(st))\n        && (now.isBefore(fn) || now.isSame(fn))\n        );\n}\n\nfunction isPast(fn){\n  let now = Moment();\n  return now.isAfter(fn);\n}\n\nmodule.exports = function(item, col){\n  let times = _.pick(col, (v, k)=>{\n    return _.includes([\"key\", \"concat\"], k);\n  });\n  var [stk, fnk] = _.values(times);\n  var [st, fn]   = [item.get(stk), item.get(fnk)]\n\n\n\n  return {\n      isNow:()=>isNow(st, fn)\n    , isPast:()=> isPast(fn)\n    , setNowOrPast:(now, past=\"\", fallback=\"\")=>{\n      if(!_.isNull(now) && isNow(st, fn)) return now;\n      if(isPast(fn)) return past;\n      return fallback;\n    }\n\n  }\n}\n"]}