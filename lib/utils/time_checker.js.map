{"version":3,"sources":["../../src/utils/time_checker.js"],"names":[],"mappings":";;;;AACA,IAAM,IAAU,QAAQ,aAAR,CAAV;IACA,SAAU,QAAQ,QAAR,CAAV;;AAGN,EAAE,QAAF,GAAa,QAAQ,iBAAR,CAAb;;AAEA,SAAS,MAAT,CAAe,EAAf,EAAmB,EAAnB,EAAsB;AACpB,MAAI,MAAM,QAAN;;;;;;AADgB,SAQd,CAAC,IAAI,OAAJ,CAAY,EAAZ,KAAmB,IAAI,MAAJ,CAAW,EAAX,CAAnB,CAAD,KACI,IAAI,QAAJ,CAAa,EAAb,KAAoB,IAAI,MAAJ,CAAW,EAAX,CAApB,CADJ,CARc;CAAtB;;AAaA,SAAS,OAAT,CAAgB,EAAhB,EAAmB;AACjB,MAAI,MAAM,QAAN,CADa;AAEjB,SAAO,IAAI,OAAJ,CAAY,EAAZ,CAAP,CAFiB;CAAnB;;AAKA,OAAO,OAAP,GAAiB,UAAS,IAAT,EAAe,GAAf,EAAmB;;AAElC,MAAI,QAAQ,EAAE,IAAF,CAAO,GAAP,EAAY,CAAC,KAAD,EAAQ,QAAR,CAAZ,CAAR,CAF8B;;iBAGjB,EAAE,MAAF,CAAS,KAAT,EAHiB;;;;MAG7B,mBAH6B;MAGxB,mBAHwB;MAI7B,KAAa,KAAK,GAAL,CAAS,GAAT,EAJgB;MAIzB,KAAwB,KAAK,GAAL,CAAS,GAAT,EAJC;;;AAQlC,SAAO;AACL,WAAM;aAAI,OAAM,EAAN,EAAU,EAAV;KAAJ;AACJ,YAAO;aAAK,QAAO,EAAP;KAAL;AACP,kBAAa,sBAAC,GAAD,EAA6B;UAAvB,6DAAK,kBAAkB;UAAd,iEAAS,kBAAK;;AAC1C,UAAG,CAAC,EAAE,MAAF,CAAS,GAAT,CAAD,IAAkB,OAAM,EAAN,EAAU,EAAV,CAAlB,EAAiC,OAAO,GAAP,CAApC;AACA,UAAG,QAAO,EAAP,CAAH,EAAe,OAAO,IAAP,CAAf;AACA,aAAO,QAAP,CAH0C;KAA7B;;GAHjB,CARkC;CAAnB","file":"time_checker.js","sourcesContent":["\nconst _       = require(\"lodash/core\")\n    , Moment  = require(\"moment\");\n\n\n_.includes = require('lodash/includes')\n\nfunction isNow(st, fn){\n  let now = Moment();\n  // if(now.isAfter(st) || now.isSame(st) || now.isBefore(fn) || now.isSame(fn)){\n  //   // console.log(st, fn)\n  //   // console.log((now.isAfter(st) || now.isSame(st)) && (now.isBefore(fn) || now.isSame(fn)))\n  // }\n\n  return (\n        (now.isAfter(st) || now.isSame(st))\n        && (now.isBefore(fn) || now.isSame(fn))\n        );\n}\n\nfunction isPast(fn){\n  let now = Moment();\n  return now.isAfter(fn);\n}\n\nmodule.exports = function(item, col){\n\n  let times = _.pick(col, [\"key\", \"concat\"]);\n  var [stk, fnk] = _.values(times);\n  var [st, fn]   = [item.get(stk), item.get(fnk)]\n\n\n\n  return {\n    isNow:()=>isNow(st, fn)\n    , isPast:()=> isPast(fn)\n    , setNowOrPast:(now, past=\"\", fallback=\"\")=>{\n      if(!_.isNull(now) && isNow(st, fn)) return now;\n      if(isPast(fn)) return past;\n      return fallback;\n    }\n\n  }\n}\n"]}