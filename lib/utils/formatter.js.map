{"version":3,"sources":["../../src/utils/formatter.js"],"names":[],"mappings":";;AAAA,IAAM,SAAS,QAAQ,iBAAR,CAAT;IACA,IAAS,QAAQ,aAAR,CAAT;;AAEN,EAAE,OAAF,GAAY,QAAQ,gBAAR,CAAZ;AACA,EAAE,QAAF,GAAa,QAAQ,iBAAR,CAAb;;AAGA,SAAS,SAAT,CAAmB,GAAnB,EAAuB;AACrB,MAAG,EAAE,GAAF,CAAM,GAAN,EAAW,KAAX,CAAH,EAAsB,OAAO,IAAI,GAAJ,CAA7B;;AAEA,MAAG,EAAE,GAAF,CAAM,GAAN,EAAW,MAAX,KAAsB,IAAI,IAAJ,KAAa,UAAb,EAAwB;AAC/C,WAAO,gBAAP,CAD+C;GAAjD;;AAIA,SAAO,UAAP,CAPqB;CAAvB;;AAUA,SAAS,WAAT,CAAqB,IAArB,EAA2B,GAA3B,EAA+B;;AAE7B,MAAG,CAAC,EAAE,MAAF,CAAS,IAAT,CAAD,EAAgB;;AAEjB,WAAO,IAAP,CAFiB;GAAnB;AAIA,SAAO,OAAO,IAAP,EAAa,QAAb,CAAsB,UAAU,GAAV,CAAtB,CAAP,CAN6B;CAA/B;;AASA,SAAS,QAAT,CAAkB,IAAlB,EAAuB;AACrB,MAAI,OAAO,IAAP,CADiB;AAErB,SAAO,UAAS,IAAT,EAAc;AACnB,QAAG,EAAE,QAAF,CAAW,IAAX,CAAH,EAAqB,OAAO,KAAK,GAAL,CAAS,IAAT,CAAP,CAArB;;AAEA,QAAI,SAAU,KAAK,GAAL,CAAS,UAAS,GAAT,EAAa;AAClC,UAAI,IAAI,KAAK,GAAL,CAAS,GAAT,CAAJ,CAD8B;AAElC,aAAO,KAAK,GAAL,CAAS,GAAT,CAAP,CAFkC;KAAb,CAAnB,CAHe;;AAQnB,QAAG,EAAE,QAAF,CAAW,MAAX,EAAmB,IAAnB,CAAH,EAA4B;AAC1B,YAAS,mBAAc,KAAK,GAAL,CAAS,KAAK,CAAL,CAAT,cAAyB,KAAK,GAAL,CAAS,KAAK,CAAL,CAAT,cAAyB,IAAzE,EAD0B;KAA5B;;AAIA,WAAO,MAAP,CAZmB;GAAd,CAFc;CAAvB;;AAoBA,SAAS,YAAT,CAAsB,IAAtB,EAA4B,GAA5B,EAAgC;AAC9B,MAAI,SAAS,KAAK,CAAC,IAAI,GAAJ,EAAS,IAAI,MAAJ,CAAf,CAAT,CAD0B;AAE9B,MAAI,MAAM,EAAE,GAAF,CAAM,MAAN,EAAc,UAAC,CAAD,EAAK;AAC3B,QAAI,OAAO,YAAY,CAAZ,EAAe,GAAf,CAAP,CADuB;;AAG3B,WAAO,IAAP,CAH2B;GAAL,CAApB,CAF0B;;AAQ9B,SAAO,IAAI,IAAJ,OAAa,IAAI,KAAJ,MAAb,CAAP,CAR8B;CAAhC;;AAaA,OAAO,OAAP,GAAiB,UAAS,IAAT,EAAc;AAC7B,MAAI,QAAQ,SAAS,IAAT,CAAR,CADyB;;AAG7B,SAAO,UAAS,GAAT,EAAa;AAClB,WAAO,CAAC,CAAE,GAAF,CAAM,GAAN,EAAW,QAAX,CAAD,GAAyB,aAAa,KAAb,EAAoB,GAApB,CAAzB,GAAoD,MAAM,IAAI,GAAJ,CAA1D,CADW;GAAb,CAHsB;CAAd","file":"formatter.js","sourcesContent":["const moment = require('moment-strftime')\n    , _      = require(\"lodash/core\");\n\n_.partial = require(\"lodash/partial\");\n_.includes = require(\"lodash/includes\");\n\n\nfunction getFormat(col){\n  if(_.has(col, \"fmt\")) return col.fmt;\n\n  if(_.has(col, \"type\") && col.type === \"dateTime\"){\n    return \"%d/%m/%Y %H:%M\";\n  }\n\n  return \"%d/%m/%Y\";\n}\n\nfunction displayData(data, col){\n\n  if(!_.isDate(data)){\n\n    return data;\n  }\n  return moment(data).strftime(getFormat(col));\n}\n\nfunction getValue(item){\n  var data = item;\n  return function(keys){\n    if(_.isString(keys)) return data.get(keys);\n\n    let values =  keys.map(function(key){\n      let d = data.get(key);\n      return data.get(key);\n    });\n\n    if(_.includes(values, true)){\n      alert(`${values} >>> ${data.get(keys[0])} >>> ${data.get(keys[1])} >>> ${keys}`)\n    }\n\n    return values\n  }\n\n}\n\n\nfunction concatValues(item, col){\n  let concat = item([col.key, col.concat]);\n  let val = _.map(concat, (d)=>{\n    let data = displayData(d, col);\n\n    return data;\n  });\n\n  return val.join(` ${col.split} `)\n}\n\n\n\nmodule.exports = function(item){\n  let value = getValue(item);\n\n  return function(col){\n    return (_.has(col, \"concat\")) ? concatValues(value, col) : value(col.key);\n  }\n}\n"]}